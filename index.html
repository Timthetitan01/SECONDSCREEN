<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SecondScreen Pro | Ultimate Edition</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gridstack@7.2.3/dist/gridstack.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    
    <style>
        :root {
            /* iOS System Colors */
            --bg-body: #000000;
            --ios-card: rgba(28, 28, 30, 0.70);
            --ios-card-border: rgba(255, 255, 255, 0.12);
            --ios-input: rgba(118, 118, 128, 0.24);
            
            --ios-blue: #0A84FF; --ios-green: #30D158; --ios-red: #FF453A;
            --ios-orange: #FF9F0A; --ios-yellow: #FFD60A; --ios-purple: #BF5AF2;
            --ios-indigo: #5E5CE6; --ios-teal: #64D2FF; --ios-pink: #FF375F;
            
            --text-main: #FFFFFF; --text-sec: rgba(235, 235, 245, 0.6);
            
            --blur: blur(40px) saturate(180%);
            --radius: 20px;
            --font: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", Roboto, sans-serif;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; -webkit-font-smoothing: antialiased; user-select: none; }

        body {
            background-color: var(--bg-body);
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(10, 132, 255, 0.15) 0%, transparent 40%),
                radial-gradient(circle at 90% 80%, rgba(255, 55, 95, 0.15) 0%, transparent 40%);
            color: var(--text-main); font-family: var(--font); height: 100vh; overflow: hidden; display: flex; flex-direction: column;
        }

        /* Navbar */
        nav {
            height: 50px; display: flex; justify-content: space-between; align-items: center; padding: 0 16px;
            background: rgba(20, 20, 20, 0.6); backdrop-filter: blur(20px); border-bottom: 1px solid var(--ios-card-border); z-index: 1000;
        }
        .brand { font-size: 15px; font-weight: 600; display: flex; align-items: center; gap: 8px; letter-spacing: -0.5px; }
        .nav-actions { display: flex; gap: 8px; }

        .btn {
            background: rgba(255, 255, 255, 0.1); border: none; color: white; padding: 6px 12px; border-radius: 99px;
            font-size: 12px; font-weight: 500; cursor: pointer; transition: 0.2s; display: flex; align-items: center; gap: 6px;
        }
        .btn:hover { background: rgba(255, 255, 255, 0.2); }
        .btn:active { transform: scale(0.96); opacity: 0.8; }
        .btn-primary { background: var(--ios-blue); }
        .btn-danger { background: rgba(255, 69, 58, 0.15); color: var(--ios-red); }

        /* Dashboard */
        #dashboard-wrapper { flex: 1; padding: 16px; overflow-y: auto; overflow-x: hidden; }

        .grid-stack-item-content {
            background: var(--ios-card) !important; backdrop-filter: var(--blur) !important;
            border: 1px solid var(--ios-card-border) !important; border-radius: var(--radius) !important;
            padding: 16px; display: flex; flex-direction: column; box-shadow: 0 4px 20px rgba(0,0,0,0.3); overflow: hidden;
        }

        .remove-widget {
            position: absolute; top: 6px; left: 6px; width: 20px; height: 20px;
            background: #3a3a3c; border-radius: 50%; color: #fff; display: none; justify-content: center; align-items: center;
            font-size: 9px; cursor: pointer; z-index: 1001;
        }
        .editing .remove-widget { display: flex; }
        .editing .grid-stack-item-content { animation: jiggle 0.25s infinite ease-in-out; border-color: var(--ios-blue) !important; }
        @keyframes jiggle { 0% { transform: rotate(-0.3deg); } 50% { transform: rotate(0.3deg); } 100% { transform: rotate(-0.3deg); } }

        .w-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; height: 16px; flex-shrink: 0; }
        .w-label { font-size: 10px; font-weight: 600; color: var(--ios-blue); text-transform: uppercase; letter-spacing: 0.5px; }
        .w-content { flex: 1; display: flex; flex-direction: column; overflow: hidden; position: relative; }

        /* Inputs */
        input, textarea, select {
            background: var(--ios-input); border: none; color: white; padding: 8px 10px; border-radius: 8px; width: 100%; font-size: 13px; outline: none;
        }
        input:focus { background: rgba(118, 118, 128, 0.4); }

        /* --- Widget Specifics --- */
        
        /* Scientific Calculator */
        .calc-screen { text-align:right; font-size:32px; font-weight:300; margin-bottom:10px; height:40px; white-space:nowrap; overflow:hidden; letter-spacing:-1px; }
        .calc-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 8px; flex: 1; }
        .calc-btn { 
            border-radius: 50%; aspect-ratio: 1; border:none; color:white; font-size:16px; cursor:pointer; 
            display:flex; align-items:center; justify-content:center; background: #333;
        }
        .calc-btn:active { filter: brightness(1.3); }
        .c-num { background: #505050; }
        .c-op { background: var(--ios-orange); font-size: 20px; }
        .c-fn { background: #303030; font-size: 13px; }
        
        /* Pomodoro */
        .pomo-circle { width: 100px; height: 100px; border: 4px solid var(--ios-card-border); border-radius: 50%; margin: 0 auto; display:flex; align-items:center; justify-content:center; font-size:24px; font-weight:600; font-variant-numeric:tabular-nums; position: relative; }
        .pomo-svg { position: absolute; top:-4px; left:-4px; width:100px; height:100px; transform: rotate(-90deg); }
        .pomo-path { stroke: var(--ios-red); stroke-width: 4; fill: none; stroke-dasharray: 283; stroke-dashoffset: 0; transition: 1s linear; }

        /* Water */
        .water-grid { display:flex; justify-content:center; gap:5px; flex-wrap:wrap; margin-top:10px; }
        .water-cup { width:20px; height:28px; background:rgba(255,255,255,0.1); border-radius: 0 0 5px 5px; cursor:pointer; }
        .water-cup.full { background: var(--ios-teal); box-shadow: 0 0 10px rgba(100,210,255,0.4); }

        /* Add Panel */
        #add-panel {
            position: fixed; bottom: -80vh; left: 0; width: 100%; height: 75vh;
            background: rgba(20, 20, 22, 0.98); backdrop-filter: blur(40px);
            border-top: 1px solid var(--ios-card-border); border-radius: 24px 24px 0 0;
            padding: 20px; display: flex; flex-direction: column; z-index: 2000;
            transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        }
        #add-panel.show { transform: translateY(-80vh); }
        
        .gallery-grid {
            display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 12px;
            overflow-y: auto; padding-bottom: 40px;
        }
        .add-card {
            background: rgba(255,255,255,0.06); padding: 12px; border-radius: 16px; text-align: center; cursor: pointer;
            display:flex; flex-direction:column; align-items:center; gap:8px; height: 90px; justify-content: center;
        }
        .add-card:active { background: rgba(255,255,255,0.12); transform: scale(0.98); }
        .add-icon { font-size: 24px; margin-bottom: 2px; }
        .add-label { font-size: 11px; font-weight: 500; color: var(--text-sec); line-height: 1.2; }

        /* Scrollbar */
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.2); border-radius: 4px; }
    </style>
</head>
<body>

    <nav>
        <div class="brand"><i class="fa-brands fa-apple"></i> SecondScreen Ultra</div>
        <div class="nav-actions">
            <button class="btn btn-primary" onclick="UI.toggleAdd(true)"><i class="fa-solid fa-plus"></i></button>
            <button id="edit-btn" class="btn" onclick="Core.toggleEdit()"><i class="fa-solid fa-pen"></i></button>
            <button class="btn" onclick="Core.saveLayout()"><i class="fa-solid fa-cloud"></i></button>
            <button class="btn btn-danger" onclick="Core.reset()"><i class="fa-solid fa-power-off"></i></button>
        </div>
    </nav>

    <div id="dashboard-wrapper">
        <div class="grid-stack"></div>
    </div>

    <div id="add-panel">
        <div style="display:flex; justify-content:space-between; margin-bottom:15px; align-items:center">
            <h3 style="font-weight:700">Widget Gallery</h3>
            <button class="btn" onclick="UI.toggleAdd(false)">Done</button>
        </div>
        <div class="gallery-grid" id="gallery-content">
            </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/gridstack@7.2.3/dist/gridstack-all.js"></script>
    
    <script>
        /** --- UTILITIES & LOGIC --- */
        const Utils = {
            // Calculator Engine
            calc: (id, key) => {
                const s = document.getElementById(`sc-${id}`);
                if (!window[`eqn_${id}`]) window[`eqn_${id}`] = '';
                let eqn = window[`eqn_${id}`];

                if (key === 'AC') { eqn = ''; s.innerText = '0'; }
                else if (key === '=') {
                    try {
                        // Safe Math Parsing
                        let evalStr = eqn
                            .replace(/×/g, '*').replace(/÷/g, '/')
                            .replace(/sin/g, 'Math.sin').replace(/cos/g, 'Math.cos').replace(/tan/g, 'Math.tan')
                            .replace(/log/g, 'Math.log10').replace(/ln/g, 'Math.log')
                            .replace(/π/g, 'Math.PI').replace(/e/g, 'Math.E')
                            .replace(/\^/g, '**').replace(/√/g, 'Math.sqrt');
                        let res = eval(evalStr);
                        s.innerText = parseFloat(res.toFixed(6)); // Clean up float errors
                        eqn = s.innerText;
                    } catch { s.innerText = 'Error'; eqn = ''; }
                } 
                else {
                    eqn += key;
                    s.innerText = eqn;
                }
                window[`eqn_${id}`] = eqn;
            },
            
            // Pomodoro Logic
            pomo: (id, action) => {
                if(!window[`pm_${id}`]) window[`pm_${id}`] = { t: 1500, max: 1500, i: null, r: false };
                let p = window[`pm_${id}`];
                const draw = () => {
                    let m = Math.floor(p.t/60).toString().padStart(2,'0');
                    let s = (p.t%60).toString().padStart(2,'0');
                    document.getElementById(`pm-t-${id}`).innerText = `${m}:${s}`;
                    const offset = 283 - (283 * p.t / p.max);
                    document.getElementById(`pm-p-${id}`).style.strokeDashoffset = offset;
                };

                if(action === 'toggle') {
                    if(p.r) { clearInterval(p.i); document.getElementById(`pm-b-${id}`).innerHTML='<i class="fa-solid fa-play"></i>'; }
                    else {
                        p.i = setInterval(() => {
                            if(p.t > 0) { p.t--; draw(); }
                            else { clearInterval(p.i); p.r=false; Utils.notify("Timer Done!"); }
                        }, 1000);
                        document.getElementById(`pm-b-${id}`).innerHTML='<i class="fa-solid fa-pause"></i>';
                    }
                    p.r = !p.r;
                } else if (action === 'reset') {
                    clearInterval(p.i); p.r=false; p.t=1500; draw();
                    document.getElementById(`pm-b-${id}`).innerHTML='<i class="fa-solid fa-play"></i>';
                }
            },

            // Water Tracker
            water: (id, idx) => {
                const cup = document.getElementById(`w-${id}-${idx}`);
                cup.classList.toggle('full');
                // Save state logic would go here
                Core.saveLayout();
            },

            // Dice Roller
            roll: (id) => {
                const el = document.getElementById(`d-${id}`);
                el.style.transform = "rotate(360deg) scale(0.5)";
                setTimeout(() => {
                    el.innerText = Math.floor(Math.random() * 6) + 1;
                    el.style.transform = "rotate(0deg) scale(1)";
                }, 200);
            },

            // Tip Calc
            calcTip: (id) => {
                const bill = parseFloat(document.getElementById(`t-b-${id}`).value) || 0;
                const pct = parseFloat(document.getElementById(`t-p-${id}`).value) || 0;
                const split = parseFloat(document.getElementById(`t-s-${id}`).value) || 1;
                const total = bill * (1 + pct/100);
                document.getElementById(`t-o-${id}`).innerText = '$' + (total / split).toFixed(2);
            },
            
            // Random Decision
            decide: (id) => {
                const t = document.getElementById(`dc-${id}`).value;
                const opts = t.split(',').filter(x => x.trim().length > 0);
                const res = opts.length ? opts[Math.floor(Math.random() * opts.length)] : "No options";
                document.getElementById(`dc-r-${id}`).innerText = res.trim();
            },

            notify: (msg) => { alert(msg); } // Simple alert for now
        };

        /** --- CORE SYSTEM --- */
        const Core = (() => {
            let grid = null, editing = false;

            const widgetDefs = [
                // PRODUCTIVITY
                { id: 'pomo', name: 'Pomodoro', icon: 'stopwatch', color: '#FF453A', w:3, h:3 },
                { id: 'todo', name: 'Tasks', icon: 'list-check', color: '#FF9F0A', w:3, h:4 },
                { id: 'notes', name: 'Notes', icon: 'note-sticky', color: '#FFD60A', w:4, h:3 },
                { id: 'voice', name: 'Voice Memo', icon: 'microphone', color: '#FF375F', w:3, h:2 },
                
                // MATH & TOOLS
                { id: 'calc', name: 'Sci Calc', icon: 'calculator', color: '#30D158', w:5, h:4 }, // WIDER
                { id: 'unit', name: 'Converter', icon: 'right-left', color: '#0A84FF', w:3, h:3 },
                { id: 'tip', name: 'Tip Split', icon: 'receipt', color: '#30D158', w:3, h:3 },
                { id: 'dice', name: 'Dice', icon: 'dice', color: '#BF5AF2', w:2, h:2 },
                { id: 'decide', name: 'Decider', icon: 'shuffle', color: '#5E5CE6', w:3, h:3 },
                { id: 'qr', name: 'QR Gen', icon: 'qrcode', color: '#000', w:3, h:3 },

                // HEALTH
                { id: 'water', name: 'Hydration', icon: 'glass-water', color: '#64D2FF', w:3, h:2 },
                { id: 'breathe', name: 'Breathe', icon: 'lungs', color: '#64D2FF', w:3, h:3 },
                
                // DEV
                { id: 'unix', name: 'Unix Time', icon: 'clock', color: '#8E8E93', w:4, h:2 },
                { id: 'uuid', name: 'UUID Gen', icon: 'fingerprint', color: '#8E8E93', w:4, h:2 },
                
                // ESSENTIALS
                { id: 'clock', name: 'Clock', icon: 'clock', color: '#FFF', w:4, h:2 },
                { id: 'weather', name: 'Weather', icon: 'cloud', color: '#0A84FF', w:3, h:2 },
                { id: 'music', name: 'Music', icon: 'music', color: '#FF375F', w:3, h:3 },
                { id: 'links', name: 'Quick Links', icon: 'link', color: '#0A84FF', w:4, h:2 }
            ];

            const init = () => {
                grid = GridStack.init({ column: 12, cellHeight: '80px', margin: 12, float: true, animate: true });
                renderGallery();
                loadData();
                setInterval(() => {
                    const now = new Date();
                    document.querySelectorAll('.time-big').forEach(el => el.innerText = now.toLocaleTimeString([], {hour: 'numeric', minute:'2-digit', hour12:true}));
                }, 1000);
            };

            const renderGallery = () => {
                const con = document.getElementById('gallery-content');
                widgetDefs.forEach(w => {
                    const div = document.createElement('div');
                    div.className = 'add-card';
                    div.innerHTML = `<i class="fa-solid fa-${w.icon} add-icon" style="color:${w.color}"></i><span class="add-label">${w.name}</span>`;
                    div.onclick = () => { createWidget(w.id, w.w, w.h); UI.toggleAdd(false); };
                    con.appendChild(div);
                });
            };

            const toggleEdit = () => {
                editing = !editing;
                grid.enableMove(editing); grid.enableResize(editing);
                document.body.classList.toggle('editing', editing);
            };

            const createWidget = (type, w, h, x, y, data) => {
                const id = 'w-' + Math.random().toString(36).substr(2, 9);
                const content = Templates.get(type, id, data);
                const el = grid.addWidget({ w, h, x, y, content, minW: 2, minH: 2 });
                el.querySelector('.remove-widget').onclick = () => grid.removeWidget(el);
                
                // Init Logic
                if(type === 'todo' && data) data.forEach(t => Templates.addTodo(id, t.t, t.d));
                if(type === 'water' && data) data.forEach((f, i) => { if(f) document.getElementById(`w-${id}-${i}`).classList.add('full'); });
                if(type === 'notes' && data) document.getElementById(`nt-${id}`).value = data;
                
                Core.saveLayout();
            };

            const saveLayout = () => {
                const items = grid.getGridItems().map(el => {
                    const type = el.getAttribute('data-type');
                    const id = el.querySelector('.w-content').id.replace('c-', ''); // Extract ID
                    let data = null;

                    if (type === 'notes') data = document.getElementById(`nt-${id}`).value;
                    if (type === 'todo') data = Array.from(document.querySelectorAll(`#l-${id} .todo-item`)).map(i => ({t: i.innerText, d: i.classList.contains('done')}));
                    if (type === 'water') data = Array.from(document.querySelectorAll(`#c-${id} .water-cup`)).map(c => c.classList.contains('full'));
                    
                    return { x: el.gridstackNode.x, y: el.gridstackNode.y, w: el.gridstackNode.w, h: el.gridstackNode.h, type, data };
                });
                localStorage.setItem('ss_ultra_v1', JSON.stringify(items));
            };

            const loadData = () => {
                const saved = JSON.parse(localStorage.getItem('ss_ultra_v1'));
                if (saved) saved.forEach(s => createWidget(s.type, s.w, s.h, s.x, s.y, s.data));
                else {
                    createWidget('clock', 4, 2, 0, 0);
                    createWidget('calc', 5, 4, 4, 0);
                    createWidget('todo', 3, 4, 9, 0);
                    createWidget('pomo', 3, 3, 0, 2);
                    createWidget('water', 3, 2, 0, 5);
                }
            };

            return { init, toggleEdit, createWidget, saveLayout, reset: () => { localStorage.clear(); location.reload(); } };
        })();

        const UI = { toggleAdd: (show) => document.getElementById('add-panel').classList.toggle('show', show) };

        const Templates = {
            addTodo: (id, text, done) => {
                const list = document.getElementById(`l-${id}`);
                const i = document.createElement('div');
                i.className = `todo-item ${done?'done':''}`;
                i.innerHTML = `<i class="fa-regular ${done?'fa-check-circle':'fa-circle'}"></i> <span>${text}</span>`;
                i.style = "padding:6px; background:rgba(255,255,255,0.05); margin-bottom:4px; border-radius:6px; font-size:12px; display:flex; gap:8px; align-items:center; cursor:pointer;";
                i.onclick = () => { i.classList.toggle('done'); Core.saveLayout(); };
                i.oncontextmenu = (e) => { e.preventDefault(); i.remove(); Core.saveLayout(); };
                list.appendChild(i);
            },
            get: (type, id, data) => {
                const wrap = (l, c) => `<div class="remove-widget">✕</div><div class="w-header" data-type="${type}"><span class="w-label">${l}</span></div><div id="c-${id}" class="w-content" data-type="${type}">${c}</div>`;
                
                const map = {
                    // Scientific Calc
                    calc: wrap('Scientific', `<div id="sc-${id}" class="calc-screen">0</div><div class="calc-grid">
                        ${['AC','(',')','÷','sin','7','8','9','×','cos','4','5','6','-','tan','1','2','3','+','log','0','.','π','=','^'].map(k => 
                            `<button class="calc-btn ${'AC()'.includes(k)?'c-fn': '÷×-+='.includes(k)?'c-op' : 'sincostanlog^π'.includes(k)?'c-fn':'c-num'}" onclick="Utils.calc('${id}','${k}')">${k}</button>`).join('')}
                    </div>`),

                    // Pomodoro
                    pomo: wrap('Focus', `<div style="display:flex; flex-direction:column; justify-content:center; height:100%; gap:10px">
                        <div class="pomo-circle"><svg class="pomo-svg" viewBox="0 0 100 100"><circle class="pomo-path" id="pm-p-${id}" cx="50" cy="50" r="45"></circle></svg><span id="pm-t-${id}">25:00</span></div>
                        <div style="display:flex; gap:10px; justify-content:center"><button class="btn btn-primary" id="pm-b-${id}" onclick="Utils.pomo('${id}','toggle')"><i class="fa-solid fa-play"></i></button><button class="btn" onclick="Utils.pomo('${id}','reset')"><i class="fa-solid fa-rotate-left"></i></button></div>
                    </div>`),

                    // Water
                    water: wrap('Hydration', `<div style="text-align:center; margin-top:10px"><div style="font-size:32px; font-weight:700; color:var(--ios-teal)">2L Goal</div><div class="water-grid">${[...Array(8)].map((_,i)=>`<div class="water-cup" id="w-${id}-${i}" onclick="Utils.water('${id}',${i})"></div>`).join('')}</div></div>`),

                    // Tip Calc
                    tip: wrap('Tip Split', `<div style="display:flex; flex-direction:column; gap:8px">
                        <input id="t-b-${id}" type="number" placeholder="Bill Amount ($)" oninput="Utils.calcTip('${id}')">
                        <div style="display:flex; gap:5px"><input id="t-p-${id}" type="number" placeholder="Tip %" value="15" oninput="Utils.calcTip('${id}')"><input id="t-s-${id}" type="number" placeholder="Split" value="1" oninput="Utils.calcTip('${id}')"></div>
                        <div style="text-align:center; margin-top:5px"><div style="font-size:10px; color:var(--text-sec)">PER PERSON</div><div id="t-o-${id}" style="font-size:24px; font-weight:700; color:var(--ios-green)">$0.00</div></div>
                    </div>`),

                    // Decider
                    decide: wrap('Decider', `<textarea id="dc-${id}" placeholder="Pizza, Sushi, Burgers..." style="flex:1; margin-bottom:10px"></textarea><button class="btn btn-primary" style="justify-content:center" onclick="Utils.decide('${id}')">Pick for Me</button><div id="dc-r-${id}" style="text-align:center; margin-top:10px; font-weight:700; color:var(--ios-purple)"></div>`),
                    
                    // Dice
                    dice: wrap('Roll', `<div style="display:flex; align-items:center; justify-content:center; height:100%"><div id="d-${id}" onclick="Utils.roll('${id}')" style="font-size:48px; width:60px; height:60px; background:white; color:black; border-radius:12px; display:flex; align-items:center; justify-content:center; font-weight:700; cursor:pointer; transition:0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);">6</div></div>`),

                    // Dev Tools
                    unix: wrap('Unix Time', `<div style="display:flex; flex-direction:column; justify-content:center; height:100%; text-align:center"><div style="font-size:24px; font-family:monospace; color:var(--ios-green)">${Math.floor(Date.now()/1000)}</div><div style="font-size:10px; color:var(--text-sec)">SECONDS SINCE EPOCH</div></div>`),
                    uuid: wrap('UUID Gen', `<div style="display:flex; flex-direction:column; justify-content:center; height:100%; gap:10px"><input id="ud-${id}" readonly style="font-family:monospace; text-align:center" value="Click Generate"><button class="btn" style="justify-content:center" onclick="document.getElementById('ud-${id}').value = crypto.randomUUID()">Generate New</button></div>`),
                    qr: wrap('QR Code', `<div style="display:flex; flex-direction:column; align-items:center; justify-content:center; height:100%"><i class="fa-solid fa-qrcode" style="font-size:64px; color:white; opacity:0.5"></i><div style="font-size:10px; margin-top:5px">API Placeholder</div></div>`),

                    // Standard
                    todo: wrap('Tasks', `<div style="display:flex; gap:5px; margin-bottom:5px"><input id="in-${id}" placeholder="New Task..." onkeypress="if(event.key==='Enter'){Templates.addTodo('${id}',this.value,false);this.value='';Core.saveLayout()}"></div><div id="l-${id}" style="flex:1; overflow-y:auto"></div>`),
                    notes: wrap('Notes', `<textarea id="nt-${id}" style="flex:1; resize:none; font-family:inherit; line-height:1.4" placeholder="Type here..." oninput="Core.saveLayout()"></textarea>`),
                    clock: wrap('Clock', `<div style="text-align:center; margin-top:auto; margin-bottom:auto"><div class="time-big" style="font-size:42px; font-weight:200">0:00</div></div>`),
                    weather: wrap('Weather', `<div style="text-align:center; margin-top:10px"><i class="fa-solid fa-cloud-sun" style="font-size:32px; color:var(--ios-blue)"></i><div style="font-size:24px; font-weight:600">72°</div></div>`),
                    links: wrap('Quick Links', `<div style="display:grid; grid-template-columns:1fr 1fr; gap:8px"><button class="btn" onclick="window.open('https://google.com')"><i class="fa-brands fa-google"></i> Google</button><button class="btn" onclick="window.open('https://youtube.com')"><i class="fa-brands fa-youtube"></i> YouTube</button><button class="btn" onclick="window.open('https://chatgpt.com')"><i class="fa-solid fa-robot"></i> ChatGPT</button><button class="btn" onclick="window.open('https://github.com')"><i class="fa-brands fa-github"></i> GitHub</button></div>`)
                };
                return map[type] || `<div>Error</div>`;
            }
        };

        window.onload = Core.init;
    </script>
</body>
</html>
